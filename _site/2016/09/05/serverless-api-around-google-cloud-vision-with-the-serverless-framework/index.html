<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Serverless API around Google Cloud Vision with the Serverless Framework &middot; John Ramey
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <!-- MathJax -->
  <script type="text/javascript"
          src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>

  

</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>The personal site of <a href="http://ramhiser.com">John Ramey</a> to discuss statistics, machine learning, and other endeavors.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about/">About Me</a>
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/software/">Software</a>
        
      
    

    <a class="sidebar-nav-item" href="https://scholar.google.com/citations?user=1g4uXl8AAAAJ&hl=en">Publications</a>
    <a class="sidebar-nav-item" href="http://github.com/ramhiser">GitHub</a>
    <a class="sidebar-nav-item" href="http://twitter.com/ramhiser">@ramhiser</a>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2016. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">John Ramey</a>
            <small>Statistics and Machine Learning</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  
  <h1 class="post-title">Serverless API around Google Cloud Vision with the Serverless Framework</h1>
  <span class="post-date">05 Sep 2016</span>

  <div class="tweet-post">
    <a href="https://twitter.com/share" class="twitter-share-button" data-via="ramhiser">Tweet</a>

    <!-- Put this just before the closing body tag -->
    <script>!function(d,s,id){var
      js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
    </script>
  </div>

  <p>The <a href="http://serverless.com/">Serverless Framework</a> hit v1.0 (beta) recently
after about a year of development. The framework has matured quickly to help
devs build scalable applications without having to maintain servers. It aims to
ease deployment via:</p>

<ul>
  <li>Easy-to-use CLI tool</li>
  <li>Customizable deployment via config files</li>
  <li>Simplifies/automates the annoying parts</li>
  <li>Extensible via plugins</li>
</ul>

<p>Although the Serverless Framework
<a href="https://github.com/serverless/serverless/issues/1510">does not yet support Google Cloud Functions</a>,
it is designed to support a variety of event-driven compute services, including
<a href="https://aws.amazon.com/lambda/">AWS Lambda</a> and (eventually)
<a href="https://cloud.google.com/functions/">Google Cloud Functions</a>. If you’re not
familiar with serverless computing, I recommend you start with
<a href="http://martinfowler.com/bliki/Serverless.html">Martin Fowler’s overview</a>.</p>

<p>So why would I use a framework rather than glue a bunch of bash scripts
together? Simple. Serverless Framework takes care of <strong>AWS IAM Roles</strong>, making
deployment much less annoying. Also, as we’ll see below, Serverless makes it
easy to include Python dependencies along with your Lambda function.</p>

<p>I’ve been eager to build a
<a href="https://github.com/ramhiser/serverless-cloud-vision">serverless app</a>. Combining
that goal with wanting to make
<a href="https://cloud.google.com/vision/">Google Cloud Vision</a> a bit more convenient to
work with, I built a serverless API wrapper around
<a href="https://cloud.google.com/vision/">Google Cloud Vision</a> using
<a href="https://aws.amazon.com/api-gateway/">AWS API Gateway</a> and
<a href="https://aws.amazon.com/lambda/">AWS Lambda</a>. I expected there to be some
craziness when combining services from both Amazon and Google, but the
Serverless Framework ensured there was none. I focused on AWS Lambda in this
project but may play with Google’s offering after it matures a bit.</p>

<h1 id="what-does-the-app-do">What Does the App Do?</h1>

<p>For the impatient, check out <a href="https://github.com/ramhiser/serverless-cloud-vision">the GitHub repository</a>.</p>

<p>Briefly, I created a microservice via API Gateway that accepts an image URL and
triggers a Lambda function, which ingests the image from a URL and sends the
image to <a href="https://cloud.google.com/vision/">Google Cloud Vision</a> for standard
image recognition tasks (e.g., facial detection, OCR, etc.). A JSON response is
returned, from which I was able to produce a new image with bounding boxes
around the faces detected (my son and me).</p>

<p><img src="https://raw.githubusercontent.com/ramhiser/serverless-cloud-vision/master/examples/images/highlighted-faces.jpg" alt="highlighted faces" /></p>

<p>Beyond facial detection, Google Cloud Vision <a href="https://cloud.google.com/vision/docs/requests-and-responses">supports the following image
recognition tasks</a>:</p>

<ul>
  <li><code>LABEL_DETECTION</code></li>
  <li><code>TEXT_DETECTION</code></li>
  <li><code>SAFE_SEARCH_DETECTION</code></li>
  <li><code>FACE_DETECTION</code></li>
  <li><code>LANDMARK_DETECTION</code></li>
  <li><code>LOGO_DETECTION</code></li>
  <li><code>IMAGE_PROPERTIES</code></li>
</ul>

<h2 id="how-to-get-started">How to Get Started?</h2>

<p>Above, we described what the project does. Now, let’s go through how to set up
the project and deploy it in your own cloud environment.</p>

<h2 id="google-cloud-vision-api">Google Cloud Vision API</h2>

<p>First, let’s go through a few details to set up the
<a href="https://cloud.google.com/vision/">Google Cloud Vision API</a>. In order to access
the Cloud Vision API, you will need a Google Cloud Platform
account. Fortunately, Google provides a
<a href="https://cloud.google.com/free-trial/">free 60-day trial with $300 credit</a>.</p>

<p>Next, you will need to create Google Application Credentials. You will need to
create a <strong>Service Account Key</strong> by following the instructions given
<a href="https://cloud.google.com/vision/docs/common/auth#set_up_a_service_account">here</a>.
After creating a <strong>Service Account Key</strong>, I downloaded a JSON file with my
application credentials into
<a href="https://github.com/ramhiser/serverless-cloud-vision">my app</a> and renamed the
file as <code>cloudvision/google-application-credentials.json</code>.</p>

<p>That’s it.</p>

<h2 id="aws">AWS</h2>

<p>As I said above, we are mixing cloud providers, which might be weaksauce to some
of you. Regardless, AWS doesn’t have a spiffy API for image recognition, but
their cloud offerings are mature.</p>

<p>You’ll first need an <a href="https://aws.amazon.com/">AWS account</a>. Quick disclaimer:
it’s not free, but for our purposes,
<a href="https://aws.amazon.com/lambda/pricing/">AWS Lambda is pretty cheap</a>.</p>

<p>Next, you need to create a default AWS profile on your local box. To do this,
<a href="http://docs.aws.amazon.com/cli/latest/userguide/installing.html">install the <code>aws-cli</code></a>
and then run the following at the command line:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">aws configure</code></pre></figure>

<p>For more details, Serverless provides an
<a href="https://github.com/serverless/serverless/blob/master/docs/02-providers/aws/01-setup.md">AWS overview</a> along with a <a href="https://www.youtube.com/watch?v=weOsx5rLWX0">video walkthrough on YouTube</a>.</p>

<p>That’s it.</p>

<h2 id="serverless-framework-to-deploy-the-app-on-aws">Serverless Framework to Deploy the App on AWS</h2>

<p>After your AWS account is ready to go, make sure you have
<a href="https://nodejs.org">Node.js 4.0+</a> installed. Then, install the
<a href="https://github.com/serverless/serverless">Serverless Framework</a>.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">npm install serverless -g</code></pre></figure>

<p>The above command makes the <code>serverless</code> command available at the CLI along with
two shortcuts: <code>sls</code> and <code>slss</code>. If you simply type <code>serverless</code>, the Serverless
Framework provides some intuitive docs.</p>

<p>If you haven’t already done so, <code>git clone</code> the app with:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">git clone git@github.com:ramhiser/serverless-cloud-vision.git
<span class="nb">cd </span>serverless-cloud-vision</code></pre></figure>

<p>Here’s one of the best parts about Serverless Framework. We can install any
Python dependencies we need in our app to a local folder, and those dependencies
will be deployed along with our app. To see this, install the Python
dependencies in our <code>requirements.txt</code> to the <code>cloudvision/vendored</code> folder:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">pip install -t cloudvision/vendored/ -r requirements.txt</code></pre></figure>

<p><strong>NOTE</strong>: Homebrew + Mac OS users who encounter the <code>DistutilsOptionError</code> error
should see <a href="http://stackoverflow.com/a/24357384/234233">this SO post</a> for a fix.</p>

<p>After installing the Python requirements to the <code>vendored</code> folder, we are ready
to deploy our app to AWS. Type the following at the commandline to deploy the
wrapper API:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">serverless deploy</code></pre></figure>

<p>This command does the following:</p>

<ul>
  <li>Create IAM roles on AWS for Lambda and API Gateway (only done once)</li>
  <li>Zips Python code and uploads to S3</li>
  <li>Creates AWS Lambda function</li>
  <li>Creates API Gateway endpoint that triggers AWS Lambda function</li>
</ul>

<p>Serverless takes a bit longer to run this command the first time because it has
to create IAM roles. However, after you have deployed your app once and then
made a change to the code, this command executes much quicker.</p>

<p>After the Serverless command returns successfully, it’ll provide a few useful
pieces of information, including the API endpoint you’ll need to use your
microservice:</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">Service Information</span>
<span class="l-Scalar-Plain">service</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">cloudvision</span>
<span class="l-Scalar-Plain">stage</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">dev</span>
<span class="l-Scalar-Plain">region</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">us-east-1</span>
<span class="l-Scalar-Plain">endpoints</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">POST - https://some-api-gateway.execute-api.us-east-1.amazonaws.com/dev/detect_image</span>
<span class="l-Scalar-Plain">functions</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">lambda-cloudvision</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">arn:aws:lambda:us-east-1:1234567890:function:lambda-cloudvision</span></code></pre></figure>

<p>The endpoint
<code>https://some-api-gateway.execute-api.us-east-1.amazonaws.com/dev/detect_image</code>
provided by API Gateway is automatically generated by AWS and will differ in
your implementation.</p>

<p>Now we have a simple API to apply basic image recognition tasks. For instance,
the following <code>curl</code> command sends an image URL of my son and me to the API.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">curl -H <span class="s2">&quot;Content-Type: application/json&quot;</span> -X POST <span class="se">\</span>
-d <span class="s1">&#39;{&quot;image_url&quot;: &quot;https://raw.githubusercontent.com/ramhiser/serverless-cloud-vision/master/examples/images/ramhiser-and-son.jpg&quot;}&#39;</span> <span class="se">\</span>
https://some-api-gateway.execute-api.us-east-1.amazonaws.com/dev/detect_image</code></pre></figure>

<p>The response JSON includes a variety of metadata to describe the image and the faces detected:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">{</span>
  <span class="s2">&quot;responses&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;faceAnnotations&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;angerLikelihood&quot;</span><span class="o">:</span> <span class="s2">&quot;VERY_UNLIKELY&quot;</span><span class="p">,</span>
          <span class="s2">&quot;blurredLikelihood&quot;</span><span class="o">:</span> <span class="s2">&quot;VERY_UNLIKELY&quot;</span><span class="p">,</span>
          <span class="s2">&quot;boundingPoly&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;vertices&quot;</span><span class="o">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="s2">&quot;x&quot;</span><span class="o">:</span> <span class="mi">512</span><span class="p">,</span>
                <span class="s2">&quot;y&quot;</span><span class="o">:</span> <span class="mi">249</span>
              <span class="p">},</span>
              <span class="p">{</span>
                <span class="s2">&quot;x&quot;</span><span class="o">:</span> <span class="mi">637</span><span class="p">,</span>
                <span class="s2">&quot;y&quot;</span><span class="o">:</span> <span class="mi">249</span>
              <span class="p">},</span>
              <span class="p">{</span>
                <span class="s2">&quot;x&quot;</span><span class="o">:</span> <span class="mi">637</span><span class="p">,</span>
                <span class="s2">&quot;y&quot;</span><span class="o">:</span> <span class="mi">395</span>
              <span class="p">},</span>
              <span class="p">{</span>
                <span class="s2">&quot;x&quot;</span><span class="o">:</span> <span class="mi">512</span><span class="p">,</span>
                <span class="s2">&quot;y&quot;</span><span class="o">:</span> <span class="mi">395</span>
              <span class="p">}</span>
            <span class="p">]</span>
          <span class="p">},</span>
          <span class="s2">&quot;detectionConfidence&quot;</span><span class="o">:</span> <span class="mf">0.98645973</span><span class="p">,</span>
          <span class="p">...</span></code></pre></figure>

<p>This JSON response was used to draw the bounding boxes in the image above. For
implementation details, <a href="https://github.com/ramhiser/serverless-cloud-vision/tree/master/examples">see the <code>examples</code> folder</a> within my repo.</p>

<p>By default, facial recognition is performed as we can see from the
<code>lambda_handler</code> function in <code>cloudvision/handler.py</code>:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">lambda_handler</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;AWS Lambda Handler for API Gateway input&quot;&quot;&quot;</span>
    <span class="n">post_args</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;body&quot;</span><span class="p">,</span> <span class="p">{})</span>
    <span class="n">image_url</span> <span class="o">=</span> <span class="n">post_args</span><span class="p">[</span><span class="s">&quot;image_url&quot;</span><span class="p">]</span>
    <span class="n">detect_type</span> <span class="o">=</span> <span class="n">post_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;detect_type&quot;</span><span class="p">,</span> <span class="s">&quot;FACE_DETECTION&quot;</span><span class="p">)</span>
    <span class="n">max_results</span> <span class="o">=</span> <span class="n">post_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;max_results&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">&quot;Detecting image from URL: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">image_url</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">&quot;Image detection type: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">detect_type</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">&quot;Maximum number of results: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">max_results</span><span class="p">)</span>

    <span class="n">json_return</span> <span class="o">=</span> <span class="n">detect_image</span><span class="p">(</span><span class="n">image_url</span><span class="p">,</span>
                               <span class="n">detect_type</span><span class="p">,</span>
                               <span class="n">max_results</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">json_return</span></code></pre></figure>

<p>The API calls the <code>detect_image</code> function with the image URL and
two optional arguments: <code>max_results</code> and <code>detect_type</code>. The <code>max_results</code>
argument specifies how many entities (e.g., faces) we wish to find, whereas the
<code>detect_type</code> argument indicates the image recognition task we wish to
perform. As mentioned above, Google Cloud Vision <a href="https://cloud.google.com/vision/docs/requests-and-responses">supports multipe image
recognition tasks</a>
beyond facial detection. For instance, let’s apply OCR to <a href="https://ustudio.com/">my employer,
uStudio’s, logo</a>:</p>

<p><a href="https://ustudio.com/"><img src="https://raw.githubusercontent.com/ramhiser/serverless-cloud-vision/master/examples/images/ustudio.jpg" alt="uStudio" /></a></p>

<p>To do this, let’s run the following <code>curl</code> command:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">curl -H <span class="s2">&quot;Content-Type: application/json&quot;</span> -X POST <span class="se">\</span>
-d <span class="s1">&#39;{&quot;image_url&quot;: &quot;https://raw.githubusercontent.com/ramhiser/serverless-cloud-vision/master/examples/images/ustudio.jpg&quot;, &quot;detect_type&quot;: &quot;TEXT_DETECTION&quot;}&#39;</span> <span class="se">\</span>
https://some-api-gateway.execute-api.us-east-1.amazonaws.com/dev/detect_image</code></pre></figure>

<p>The response JSON has a similar form as our facial detection example, but this
time a bounding box around the logo is given with a <code>description: Ustudio</code>.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">{</span>
  <span class="s2">&quot;responses&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;textAnnotations&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;locale&quot;</span><span class="o">:</span> <span class="s2">&quot;et&quot;</span><span class="p">,</span>
          <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;Ustudio\n&quot;</span><span class="p">,</span>
          <span class="s2">&quot;boundingPoly&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;vertices&quot;</span><span class="o">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="s2">&quot;y&quot;</span><span class="o">:</span> <span class="mi">91</span><span class="p">,</span>
                <span class="s2">&quot;x&quot;</span><span class="o">:</span> <span class="mi">176</span>
              <span class="p">},</span>
              <span class="p">{</span>
                <span class="s2">&quot;y&quot;</span><span class="o">:</span> <span class="mi">91</span><span class="p">,</span>
                <span class="s2">&quot;x&quot;</span><span class="o">:</span> <span class="mi">1322</span>
              <span class="p">},</span>
              <span class="p">{</span>
                <span class="s2">&quot;y&quot;</span><span class="o">:</span> <span class="mi">348</span><span class="p">,</span>
                <span class="s2">&quot;x&quot;</span><span class="o">:</span> <span class="mi">1322</span>
              <span class="p">},</span>
              <span class="p">{</span>
                <span class="s2">&quot;y&quot;</span><span class="o">:</span> <span class="mi">348</span><span class="p">,</span>
                <span class="s2">&quot;x&quot;</span><span class="o">:</span> <span class="mi">176</span>
              <span class="p">}</span>
            <span class="p">]</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">...</span></code></pre></figure>

<p>Nice! OCR made simple.</p>

<h1 id="gotchas">Gotchas</h1>

<p>The Serverless Framework simplified our microservice deployment via API Gateway
and Lambda. There are some gotchas though that you should be aware of.</p>

<p>First, neither AWS nor Serverless Framework are fully aware of your folder
structure, so you’ll need to ensure Python is aware of where your dependencies
are located, as in this snippet from <code>cloudvision/lib/__init__.py</code>:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">here</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">__file__</span><span class="p">))</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">here</span><span class="p">,</span> <span class="s">&quot;../vendored&quot;</span><span class="p">))</span></code></pre></figure>

<p>Second, YAML indentation. Grrrrr. My API Gateway endpoints were not working for
some time (no errors!) because I was missing two spaces in my YAML file. Two
spaces!!! It was only after <a href="https://github.com/serverless/serverless/issues/1810">someone else</a> encountered the same issue did I see
<a href="https://github.com/ramhiser/serverless-cloud-vision/commit/0f0bba03f1d739f005aadafcc1c3b6e0fc17f922">what to do</a>:</p>

<p><img src="https://raw.githubusercontent.com/ramhiser/serverless-cloud-vision/master/yaml-indentation-grrrr.png" alt="Fixing YAML Indentation" /></p>

<p>That’s it! Besides the couple of gotchas, the Serverless Framework makes it easy
to deploy simple microservices.</p>

</div>

<div class="disqus">
  <div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'ramhiser'; // required: replace example with your forum shortname
  var disqus_identifier = '/2016/09/05/serverless-api-around-google-cloud-vision-with-the-serverless-framework/';
  var disqus_url = 'http://ramhiser.com/2016/09/05/serverless-api-around-google-cloud-vision-with-the-serverless-framework/';

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="//2016/01/05/installing-tensorflow-on-an-aws-ec2-instance-with-gpu-support/">
            Installing TensorFlow on an AWS EC2 Instance with GPU Support
            <small>05 Jan 2016</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="//2015/02/01/configuring-ipython-notebook-support-for-pyspark/">
            Configuring IPython Notebook Support for PySpark
            <small>01 Feb 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="//2015/01/24/installing-python-data-science-stack-on-yosemite/">
            Installing Python Data Science Stack on Yosemite
            <small>24 Jan 2015</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
